class Settings:

	def __init__(self):
	# set up screen
	pygame.event.set_grab(False)
	pygame.mouse.set_visible(False)

	# for this operation os.urandom is used
	seed_size = 16
	seed = random.randint(10 ** (seed_size - 1), (10 ** seed_size) - 1)
	random.seed(seed)

	screenx = pygame.display.Info().current_w
	screeny = pygame.display.Info().current_h
	pygame.display.set_mode((1, 1))
	aspect_ratio = screenx / float(screeny)
	screenx_current = screenx
	screeny_current = screeny

	# create empty folders if needed
	if not os.path.exists("./assets/sprites/player/"):
		os.makedirs("./assets/sprites/player/")
	if not os.path.exists("./screenshots/"):
		os.makedirs("./screenshots/")

	# load images and convert them to the fatest blittable format
	background = pygame.image.load("./assets/sprites/Background2.tif").convert()
	field = pygame.image.load("./assets/sprites/inputbox1.tif").convert_alpha()
	bullet_img = pygame.image.load("./assets/sprites/Bullet.tif").convert_alpha()
	targeton_img = pygame.image.load("./assets/sprites/mine_on.tif"
				).convert_alpha()
	targetoff_img = pygame.image.load("./assets/sprites/mine_off.tif"
				).convert_alpha()
	border1 = pygame.image.load("./assets/sprites/bar1.tif").convert_alpha()

	# define some konstants or default values
	clock = pygame.time.Clock()
	typeface = "monospace"
	stdfont = pygame.font.SysFont(typeface, 15)

	version = "0.3.2.9 dev"
	up = False
	down = False
	left = False
	right = False
	konstspeed = 0.0025
	fullscreen = False
	debugscreen = False
	debugmode = False
	dstars = 500
	isnear = "False"
	code = ""
	events = []
	color = (255, 255, 10)
	skip = False
	volume = 0.5
	fullscreenold = False
	fake_size = 8 / 7.0
	psycomode = False
	current_game = "default"
	run = True
	dtargets = 5
	morevents = []
	bullets = []
	infinitevents = {"fire1": False, "roundfire": False}
	musicend = USEREVENT + 100
	events = []
	loading_time = 0

	from .player import player as player
	player = player()

	pygame.display.set_caption("Project Interstellar " + version)
	pygame.display.set_icon(pygame.image.load("./assets/sprites/logo.png"))

	# more complex default settings like creation of stars and targets and so on
	if debugmode:
		# Add custom handler here for when debugmode is activated
		volume = 0.0
		# fullscreen = False
		pass

	def get_anim_source(num, quantity):
		animationsourcetmp = []
		if num >= 10:
			num = str(num)
		else:
			num = "0" + str(num)
		for a in range(quantity):
			a = str(a)
			if int(a) < 10:
				a = "0" + str(a)
			tmp = ("./assets/sprites/explosions/expl_" + num + "_00" + a + ".tif", 0.04)
			animationsourcetmp.append(tmp)
		return animationsourcetmp

	explosion9 = pyganim.PygAnimation(get_anim_source(9, 32), loop=False)
	explosion10 = pyganim.PygAnimation(get_anim_source(10, 32), loop=False)
	explosion11 = pyganim.PygAnimation(get_anim_source(11, 24), loop=False)
	explosions = [explosion9, explosion10, explosion11]
	explosions_disp = []

	saves = []
	for filename in os.listdir("./saves"):
		if filename.endswith(".ini"):
			filename = filename[:-4].decode("utf-8")
			saves.append(filename)

	if fullscreen:
		screen = pygame.display.set_mode(
			(screenx_current, screeny_current),
			pygame.FULLSCREEN, 32)
	if not fullscreen:
		screenx_current = int(screenx_current / 2.0)
		screeny_current = int(screeny_current / 2.0)
		screen = pygame.display.set_mode((screenx_current, screeny_current),
		0, 32)

	from . import worlds
	localmap = {}
	for a in range(8):
		world = worlds.world(str(a + 1))
		world.generate(background, dstars, dtargets)
		localmap[str(a + 1)] = world
	world = localmap["1"]
	upd("adjust_screen")

	#scales images so they fill screen especially when not 16/9 ar
	if aspect_ratio > 16.0 / 9:
		ratio = screenx_current / float(background.get_size()[1])
		pygame.transform.smoothscale(background,
					(screenx_current, screeny_current * ratio))
	elif aspect_ratio < 16.0 / 9:
		ratio = screeny_current / float(background.get_size()[0])
		pygame.transform.smoothscale(background,
					(screenx_current * ratio, screeny_current))


def reset():

	"""resets some settings"""
	global konstspeed
	global color

	pygame.event.set_grab(False)
	pygame.mouse.set_visible(False)

	player.reset()

	konstspeed = 0.0025
	color = (255, 255, 10)

	from . import missions
	missions.handle("pause")

	if debugmode:
		fullscreen = False  # lint:ok

	world.generate(world.background, dstars, dtargets)


def upd(level):

	"""updates various variables"""
	if level == "get_events":
		global events
		events = pygame.fastevent.get()
		return
	if level == "screenvalues":
		global screenx_current
		global screeny_current
		global aspect_ratio
		screenx_current = pygame.display.Info().current_w
		screeny_current = pygame.display.Info().current_h
		aspect_ratio = screenx_current / float(screeny_current)
		return
	if level == "get_saves":
		global saves
		saves = []
		for filename in os.listdir("./saves"):
			if filename.endswith(".ini"):
				filename = filename[:-4]
				if filename not in ("default"):
					saves.append(filename)
		return
	if level == "adjust_screen":
		global background
		global background_pos
		global konstspeed
		global fullscreenold
		global fullscreen

		if fullscreenold != fullscreen:
			if fullscreen:
				pygame.display.set_mode((screenx, screeny), pygame.FULLSCREEN)
			if not fullscreen:
				pygame.display.set_mode((screenx / 2, screeny / 2))
			fullscreenold = fullscreen

		upd("screenvalues")
#>>>>>>> small-fixes-for-0.3.3
